<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>エアコンコンサルツール</title>
  <link rel="stylesheet" href="style.css"> 
</head>
<body>
  <div class="container">
    <div class="card">
      <div id="question">エアコンコンサルを始めますか？</div>
      <button id="startBtn" class="btn btn-start" onclick="start()">スタート</button>
      <button id="yesBtn" class="btn btn-yes" onclick="answer('yes')" style="display:none;">はい</button>
      <button id="noBtn" class="btn btn-no" onclick="answer('no')" style="display:none;">いいえ</button>
      <button id="restartBtn" class="btn btn-restart" onclick="restart()" style="display:none;">もう一度</button>
    </div>
  </div>

  <script>
    const questions = [
      { key: 'inpei', question: '隠蔽配管？' },
      { key: 'airClean', question: '空気清浄は必要？' },
      { key: 'eco', question: '省エネ性能は高めがいい？' },
      { key: 'autoClean', question: '二週間に一度掃除する？' },
      { key: 'smell', question: '臭いを抑えたい？' },
      { key: 'rakuClean', question: 'ダストボックスの掃除を楽にしたい？' },
      { key: 'kasitsu', question: '加湿機能は必要？'},
      { key: 'windmove', question: '同じ部屋に暑がりさん、寒がりさんがいる？'}

    ];

    const products = [

      {//ダイキン
        name: 'ダイキン Rシリーズ',
        conditions: {inpei:'no',airClean: 'yes',eco:'yes',autoClean:'no',smell:'yes',rakuClean:'no',kasitsu:'yes',windmove:'no'}
      },
      
      {
        name: 'ダイキン Aシリーズ',
        conditions: {inpei:'no',airClean: 'yes',eco: 'yes',autoClean: 'no',smell:'yes',rakuClean:'no',kasitsu:'no',windmove:'no' }
      },
      
      {
        name: 'ダイキン Fシリーズ',
        conditions: {inpei:'no',airClean: 'yes',eco: 'yes',autoClean: 'no',smell:'yes',rakuClean:'no',kasitsu:'no',windmove:'no' }
      },
      {
        name: 'ダイキン Fシリーズ',
        conditions: {inpei:'yes',airClean: 'yes',eco: 'yes',autoClean: 'no',smell:'yes',rakuClean:'no',kasitsu:'no',windmove:'no' }
      },
      
       {
        name: 'ダイキン Cシリーズ',
        conditions: {inpei:'yes',airClean: 'yes',eco: 'yes',autoClean: 'no',smell:'yes',rakuClean:'no',kasitsu:'no',windmove:'no'}
      },
      
     {
        name: 'ダイキン Cシリーズ',
        conditions: {inpei:'no',airClean: 'yes',eco: 'yes',autoClean: 'no',smell:'yes',rakuClean:'no',kasitsu:'no',windmove:'no' }
      },
      
      {
        name: 'ダイキン Eシリーズ',
        conditions: {inpei: 'yes', airClean: 'yes',eco: 'no',autoClean: 'yes',smell:'no' ,rakuClean:'no',kasitsu:'no',windmove:'no'}
      },
      
       {
        name: 'ダイキン Eシリーズ',
        conditions: {inpei:'no',airClean: 'yes',eco: 'no',autoClean: 'yes',smell:'no',rakuClean:'no',kasitsu:'no',windmove:'no' }
      },
      
      {//三菱
        name: '三菱 GEシリーズ',
        conditions: {inpei: 'yes', airClean: 'no',eco: 'no' ,autoClean: 'yes',smell:'no',rakuClean:'yes',kasitsu:'no',windmove:'no'}
      },
      
       {
        name: '三菱 Sシリーズ',
        conditions: {inpei: 'yes', airClean: 'no',eco: 'no',autoClean: 'yes',smell:'yes' ,rakuClean:'yes',kasitsu:'no',windmove:'no'}
      },
      
       {
        name: '三菱 XDシリーズ',
        conditions: {inpei: 'yes', airClean: 'yes',eco: 'yes',autoClean: 'no',smell:'yes' ,rakuClean:'yes',kasitsu:'no',windmove:'yes'}
      },
      
       {
        name: '三菱 Xシリーズ',
        conditions: {inpei: 'yes', airClean: 'yes',eco: 'yes',autoClean: 'no',smell:'yes' ,rakuClean:'yes',kasitsu:'no',windmove:'yes'}
       },
      
       {
        name: '三菱 Zシリーズ',
        conditions: {inpei: 'yes', airClean: 'yes',eco: 'yes',autoClean: 'no',smell:'yes' ,rakuClean:'yes',kasitsu:'no',windmove:'yes'}
      },
      
       {
        name: '三菱 FZシリーズ',
        conditions: {inpei: 'yes', airClean: 'yes',eco: 'yes',autoClean: 'no',smell:'yes' ,rakuClean:'yes',kasitsu:'no',windmove:'yes'}
      },
      
      {//富士通
        name: '富士通 Cシリーズ',
        conditions: {inpei: 'yes', airClean: 'no',eco: 'no',autoClean: 'yes',smell:'no' ,rakuClean:'no',kasitsu:'no',windmove:'no'}
      },
      
      {
        name: '富士通 Cシリーズ',
        conditions: {inpei: 'no', airClean: 'no',eco: 'no',autoClean: 'yes',smell:'no' ,rakuClean:'no',kasitsu:'no',windmove:'no'}
      },
      
       {
        name: '富士通 Dシリーズ',
        conditions: {inpei: 'yes', airClean: 'no',eco: 'no',autoClean: 'no',smell:'yes' ,rakuClean:'no',kasitsu:'no',windmove:'no'}
      },
      
       {
        name: '富士通 Dシリーズ',
        conditions: {inpei: 'no', airClean: 'no',eco: 'no',autoClean: 'no',smell:'yes' ,rakuClean:'no',kasitsu:'no',windmove:'no'}
      },
      
       {
        name: '富士通 Wシリーズ',
        conditions: {inpei: 'yes', airClean: 'no',eco: 'yes',autoClean: 'no',smell:'yes' ,rakuClean:'no',kasitsu:'no',windmove:'no'}
      },
      
      {
        name: '富士通 Wシリーズ',
        conditions: {inpei: 'no', airClean: 'no',eco: 'yes',autoClean: 'no',smell:'yes' ,rakuClean:'no',kasitsu:'no',windmove:'no'}
      },
      
      {
        name: '富士通 Zシリーズ',
        conditions: {inpei: 'yes', airClean: 'yes',eco: 'yes',autoClean: 'no',smell:'yes' ,rakuClean:'no',kasitsu:'no',windmove:'no'}
      },
      
        {
        name: '富士通 Zシリーズ',
        conditions: {inpei: 'no', airClean: 'yes',eco: 'yes',autoClean: 'no',smell:'yes' ,rakuClean:'no',kasitsu:'no',windmove:'no'}
      },
      
        {
        name: '富士通 Xシリーズ',
        conditions: {inpei: 'yes', airClean: 'yes',eco: 'yes',autoClean: 'no',smell:'yes' ,rakuClean:'no',kasitsu:'no',windmove:'no'}
      },
      
        {
        name: '富士通 Xシリーズ',
        conditions: {inpei: 'no', airClean: 'yes',eco: 'yes',autoClean: 'no',smell:'yes' ,rakuClean:'no',kasitsu:'no',windmove:'no'}
      },
      
      {
        name: 'パナソニック EX/Xシリーズ',
        conditions: {inpei: 'no', airClean: 'yes',eco: 'yes',autoClean: 'no',smell:'yes',rakuClean:'yes' }
      },
      {
        name: 'シャープ AY-Nシリーズ',
        conditions: {inpei: 'no', airClean: 'no',eco: 'no',autoClean: 'yes',smell:'yes',rakuClean:'no' }
      }
    ];

    let answers = {};
    let currentIndex = 0;

    function start() {
      currentIndex = 0;
      answers = {};
      document.getElementById('startBtn').style.display = 'none';
      document.getElementById('yesBtn').style.display = 'inline-block';
      document.getElementById('noBtn').style.display = 'inline-block';
      document.getElementById('restartBtn').style.display = 'none';
      document.getElementById('question').innerText = questions[currentIndex].question;
    }

    function answer(choice) {
      const key = questions[currentIndex].key;
      answers[key] = choice;
      currentIndex++;

      if (currentIndex >= questions.length) {
        showResult();
      } else {
        document.getElementById('question').innerText = questions[currentIndex].question;
      }
    }

    function showResult() {
  const scored = products.map(product => {
    let matchCount = 0;
    let totalConditions = Object.keys(product.conditions).length;

    for (const [key, value] of Object.entries(product.conditions)) {
      if (answers[key] === value) {
        matchCount++;
      }
    }

    const score = matchCount / totalConditions;
    return { ...product, score };
  });

  // スコア順にソート（降順）
  const sorted = scored.sort((a, b) => b.score - a.score);

  const resultDiv = document.getElementById('question');
  if (sorted.length > 0 && sorted[0].score > 0) {
    const topProducts = sorted.slice(0, 3); // 上位3つ表示
    resultDiv.innerHTML = `<div class="result"><strong>おすすめ製品（マッチ度順）:</strong><br>${topProducts.map(p => `${p.name}（${Math.round(p.score * 100)}%）`).join('<br>')}</div>`;
  } else {
    resultDiv.innerHTML = '<div class="result">ご希望条件に近い製品が見つかりませんでした。</div>';
  }

  document.getElementById('yesBtn').style.display = 'none';
  document.getElementById('noBtn').style.display = 'none';
  document.getElementById('restartBtn').style.display = 'inline-block';
}


    function restart() {
      document.getElementById('question').innerText = "エアコンコンサルを始めますか？";
      document.getElementById('startBtn').style.display = 'inline-block';
      document.getElementById('yesBtn').style.display = 'none';
      document.getElementById('noBtn').style.display = 'none';
      document.getElementById('restartBtn').style.display = 'none';
    }
  </script>
</body>
</html>
